# Purse - 收支明细插件

这是一个用于 Obsidian 的收支明细记录插件，可以帮助您方便地记录和管理日常收支。

## 功能特性

1. **自动识别账单文件**：只对 frontMatter 中带有 `purse=true`，且文件名为 "(0[1-9]|1[0-2])月" 的 markdown 文件生效
2. **格式校验**：打开文件时自动校验格式，格式不正确时自动切换到源码模式并提示
3. **自定义渲染**：在非源码模式下提供美观的表格视图
4. **添加记录**：通过弹窗表单添加新的收支记录
5. **删除记录**：删除记录时需要二次确认，防止误操作

## 文件格式要求

账单文件必须符合以下格式：

```markdown
---
purse: true
---

# 收支明细

## 1号
| 类型 | 分类 | 标签 | 数额   | 备注             |
| ---- | ---- | ---- | ------ | ---------------- |
| 支出 | 日常 | 交通 | 200.00 | 深圳通￥ 282.20   |
| 支出 | 日常 | 食物 | 13.00  | 晚餐             |

## 2号
| 类型 | 分类 | 标签 | 数额   | 备注             |
| ---- | ---- | ---- | ------ | ---------------- |
| 收入 | 工资 | 薪资 | 5000.00 | 本月工资         |
```

### 格式说明

- 文件名必须为：`01月.md`、`02月.md` ... `12月.md`
- frontMatter 中必须包含 `purse: true`
- 主标题必须是 `# 收支明细`
- 日期标题格式：`## xx号`（从1号到每月最后一日）
- 表格必须包含5列：类型、分类、标签、数额、备注
- 类型值只能是：`支出` 或 `收入`
- 数额必须是两位小数的数字格式（如：`200.00`）

## 使用方法

1. 创建一个符合格式要求的 markdown 文件（例如：`01月.md`）
2. 在文件开头添加 frontMatter：`purse: true`
3. 按照格式要求编写内容
4. 打开文件时，插件会自动校验格式
5. 格式正确时，会自动切换到自定义视图，您可以通过"添加"按钮添加记录，通过"删除"按钮删除记录

## 开发

### 安装依赖

```bash
npm install
```

### 构建插件

```bash
npm run build
```

### 开发模式

```bash
npm run dev
```

## 许可证

MIT

